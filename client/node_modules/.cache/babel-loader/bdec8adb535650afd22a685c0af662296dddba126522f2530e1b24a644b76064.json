{"ast":null,"code":"import _objectSpread from\"C:/Users/Marcelo/OneDrive/Documents/Desktop/e-traffic system/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useQuery,useMutation,useQueryClient}from'@tanstack/react-query';import{Plus,Edit,Trash2,Search,RefreshCw}from'lucide-react';import{adminAPI}from'../../services/api';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Enforcers=()=>{var _enforcersResponse$da,_enforcersResponse$da2,_enforcersResponse$da3,_enforcersResponse$da4;const[searchTerm,setSearchTerm]=useState('');const[statusFilter,setStatusFilter]=useState('all');const[showAddModal,setShowAddModal]=useState(false);const[editingEnforcer,setEditingEnforcer]=useState(null);const[formErrors,setFormErrors]=useState({});const[suggestedBadgeNumber,setSuggestedBadgeNumber]=useState('');const queryClient=useQueryClient();// Debug authentication\nconst token=localStorage.getItem('token');console.log('Auth token:',token?'Present':'Missing');console.log('Token value:',token);// Fetch enforcers\nconst{data:enforcersResponse,isLoading,error:queryError,isFetching}=useQuery({queryKey:['enforcers'],queryFn:()=>adminAPI.getEnforcers(),retry:1,refetchOnWindowFocus:false});console.log('Query state:',{isLoading,isFetching,error:queryError,hasData:!!enforcersResponse});// Extract enforcers array from response (server wraps payload in data)\nconst enforcers=(enforcersResponse===null||enforcersResponse===void 0?void 0:(_enforcersResponse$da=enforcersResponse.data)===null||_enforcersResponse$da===void 0?void 0:(_enforcersResponse$da2=_enforcersResponse$da.data)===null||_enforcersResponse$da2===void 0?void 0:_enforcersResponse$da2.enforcers)||[];// Debug logging\nconsole.log('Enforcers API Response:',enforcersResponse);console.log('Extracted enforcers:',enforcers);console.log('Response structure:',{success:enforcersResponse===null||enforcersResponse===void 0?void 0:(_enforcersResponse$da3=enforcersResponse.data)===null||_enforcersResponse$da3===void 0?void 0:_enforcersResponse$da3.success,data:enforcersResponse===null||enforcersResponse===void 0?void 0:enforcersResponse.data,enforcers:enforcersResponse===null||enforcersResponse===void 0?void 0:(_enforcersResponse$da4=enforcersResponse.data)===null||_enforcersResponse$da4===void 0?void 0:_enforcersResponse$da4.enforcers});// Fetch next badge number for new enforcers\nconst fetchNextBadgeNumber=async()=>{try{const response=await adminAPI.getNextBadgeNumber();if(response.data.success){setSuggestedBadgeNumber(response.data.data.next_badge_number);}}catch(error){console.error('Failed to fetch next badge number:',error);// Fallback to manual entry\nsetSuggestedBadgeNumber('');}};// Auto-fetch badge number when opening add modal\nuseEffect(()=>{if(showAddModal&&!editingEnforcer){fetchNextBadgeNumber();}},[showAddModal,editingEnforcer]);// Add enforcer mutation\nconst addEnforcerMutation=useMutation({mutationFn:enforcerData=>adminAPI.createEnforcer(enforcerData),onSuccess:(response,variables)=>{// Add the new enforcer to the cache immediately\nqueryClient.setQueryData(['enforcers'],oldData=>{var _oldData$data,_oldData$data$data;if(oldData!==null&&oldData!==void 0&&(_oldData$data=oldData.data)!==null&&_oldData$data!==void 0&&(_oldData$data$data=_oldData$data.data)!==null&&_oldData$data$data!==void 0&&_oldData$data$data.enforcers){var _response$data;return _objectSpread(_objectSpread({},oldData),{},{data:_objectSpread(_objectSpread({},oldData.data),{},{data:_objectSpread(_objectSpread({},oldData.data.data),{},{enforcers:[(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.data,...(oldData.data.data.enforcers||[])]})})});}return oldData;});// Also invalidate to ensure fresh data across pages\nqueryClient.invalidateQueries(['enforcers']);queryClient.invalidateQueries(['adminDashboard']);setShowAddModal(false);setFormErrors({});// Show success message with IoT device login instructions\nconst enforcerName=variables.full_name||variables.username;toast.success(\"\".concat(enforcerName,\" added! \\n\\n\\uD83D\\uDCF1 IoT Login:\\nEmail: \").concat(variables.email,\"\\nPassword: [as provided]\"),{duration:6000,style:{minWidth:'300px'}});},onError:error=>{var _error$response,_error$response2,_error$response2$data;console.log('Add enforcer error:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);// Handle validation errors\nif((_error$response2=error.response)!==null&&_error$response2!==void 0&&(_error$response2$data=_error$response2.data)!==null&&_error$response2$data!==void 0&&_error$response2$data.details&&error.response.data.details.length>0){const errors={};error.response.data.details.forEach(detail=>{const fieldName=detail.param||detail.path||detail.location;errors[fieldName]=detail.msg;});setFormErrors(errors);// Don't show general error if we have specific field errors\n}else{var _error$response3,_error$response3$data,_error$response4,_error$response4$data,_error$response5,_error$response5$data,_error$response6,_error$response6$data;// Only show general error if no specific field errors\nsetFormErrors({general:((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||'Failed to add enforcer. Please check your input and try again.'});toast.error(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.message)||((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.error)||'Failed to add enforcer');}}});// Update enforcer mutation\nconst updateEnforcerMutation=useMutation({mutationFn:_ref=>{let{id,data}=_ref;return adminAPI.updateEnforcer(id,data);},onSuccess:(response,variables)=>{// Update the enforcer in the cache immediately\nqueryClient.setQueryData(['enforcers'],oldData=>{var _oldData$data2,_oldData$data2$data;if(oldData!==null&&oldData!==void 0&&(_oldData$data2=oldData.data)!==null&&_oldData$data2!==void 0&&(_oldData$data2$data=_oldData$data2.data)!==null&&_oldData$data2$data!==void 0&&_oldData$data2$data.enforcers){return _objectSpread(_objectSpread({},oldData),{},{data:_objectSpread(_objectSpread({},oldData.data),{},{data:_objectSpread(_objectSpread({},oldData.data.data),{},{enforcers:oldData.data.data.enforcers.map(enforcer=>{var _response$data2;return enforcer.id===variables.id?_objectSpread(_objectSpread({},enforcer),(_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.data):enforcer;})})})});}return oldData;});// Also invalidate to ensure fresh data across pages\nqueryClient.invalidateQueries(['enforcers']);queryClient.invalidateQueries(['adminDashboard']);setEditingEnforcer(null);setFormErrors({});toast.success('Enforcer updated successfully');},onError:error=>{var _error$response7,_error$response8,_error$response8$data;console.log('Update enforcer error:',(_error$response7=error.response)===null||_error$response7===void 0?void 0:_error$response7.data);// Handle validation errors\nif((_error$response8=error.response)!==null&&_error$response8!==void 0&&(_error$response8$data=_error$response8.data)!==null&&_error$response8$data!==void 0&&_error$response8$data.details&&error.response.data.details.length>0){const errors={};error.response.data.details.forEach(detail=>{const fieldName=detail.param||detail.path||detail.location;errors[fieldName]=detail.msg;});setFormErrors(errors);// Don't show general error if we have specific field errors\n}else{var _error$response9,_error$response9$data,_error$response0,_error$response0$data,_error$response1,_error$response1$data,_error$response10,_error$response10$dat;// Only show general error if no specific field errors\nsetFormErrors({general:((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.message)||((_error$response0=error.response)===null||_error$response0===void 0?void 0:(_error$response0$data=_error$response0.data)===null||_error$response0$data===void 0?void 0:_error$response0$data.error)||'Failed to update enforcer. Please check your input and try again.'});toast.error(((_error$response1=error.response)===null||_error$response1===void 0?void 0:(_error$response1$data=_error$response1.data)===null||_error$response1$data===void 0?void 0:_error$response1$data.message)||((_error$response10=error.response)===null||_error$response10===void 0?void 0:(_error$response10$dat=_error$response10.data)===null||_error$response10$dat===void 0?void 0:_error$response10$dat.error)||'Failed to update enforcer');}}});// Delete enforcer mutation\nconst deleteEnforcerMutation=useMutation({mutationFn:id=>adminAPI.deleteEnforcer(id),onSuccess:()=>{queryClient.invalidateQueries(['enforcers']);queryClient.invalidateQueries(['adminDashboard']);toast.success('Enforcer deleted successfully');},onError:error=>{var _error$response11,_error$response11$dat;toast.error(((_error$response11=error.response)===null||_error$response11===void 0?void 0:(_error$response11$dat=_error$response11.data)===null||_error$response11$dat===void 0?void 0:_error$response11$dat.message)||'Failed to delete enforcer');}});// Filter enforcers\nconst filteredEnforcers=enforcers.filter(enforcer=>{var _enforcer$badge_numbe;const matchesSearch=enforcer.full_name.toLowerCase().includes(searchTerm.toLowerCase())||enforcer.email.toLowerCase().includes(searchTerm.toLowerCase())||((_enforcer$badge_numbe=enforcer.badge_number)===null||_enforcer$badge_numbe===void 0?void 0:_enforcer$badge_numbe.toLowerCase().includes(searchTerm.toLowerCase()));const matchesStatus=statusFilter==='all'||statusFilter==='active'&&enforcer.is_active||statusFilter==='inactive'&&!enforcer.is_active;return matchesSearch&&matchesStatus;});const handleSubmit=e=>{e.preventDefault();const formData=new FormData(e.target);const enforcerData={username:formData.get('username'),email:formData.get('email'),full_name:formData.get('full_name'),badge_number:formData.get('badge_number'),phone_number:formData.get('phone_number'),is_active:formData.get('is_active')==='true'};// Only include password for new enforcers\nif(!editingEnforcer){enforcerData.password=formData.get('password');}if(editingEnforcer){updateEnforcerMutation.mutate({id:editingEnforcer.id,data:enforcerData});}else{addEnforcerMutation.mutate(enforcerData);}};const handleDelete=id=>{if(window.confirm('Are you sure you want to delete this enforcer?')){deleteEnforcerMutation.mutate(id);}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"})});}if(queryError){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 mb-4\",children:\"Failed to load enforcers\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:queryError.message}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),className:\"mt-4 btn-primary\",children:\"Retry\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"responsive-text-2xl font-bold text-gray-900\",children:\"Enforcer Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"responsive-text-sm text-gray-600\",children:\"Manage traffic enforcer accounts\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddModal(true),className:\"mobile-btn-primary flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Add Enforcer\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sm:hidden\",children:\"Add\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-blue-400 mt-0.5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3 flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-blue-800\",children:\"\\uD83D\\uDCF1 IoT Device Integration\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-sm text-blue-700\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Enforcers use \",/*#__PURE__*/_jsx(\"strong\",{children:\"email\"}),\" and \",/*#__PURE__*/_jsx(\"strong\",{children:\"password\"}),\" to log into handheld IoT devices for recording violations.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex flex-wrap gap-4 text-xs\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 bg-green-500 rounded-full mr-1\"}),\"Automatic account activation\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 bg-green-500 rounded-full mr-1\"}),\"Secure password hashing\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 bg-green-500 rounded-full mr-1\"}),\"Real-time violation sync\"]})]})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow mobile-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-4 p-4 sm:p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search enforcers...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm sm:text-base transition-colors duration-200\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(\"select\",{value:statusFilter,onChange:e=>setStatusFilter(e.target.value),className:\"block w-full px-3 py-3 border border-gray-300 rounded-lg shadow-sm bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm sm:text-base transition-colors duration-200 min-w-[140px] appearance-none\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactive\",children:\"Inactive\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 9l-7 7-7-7\"})})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Enforcer\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Badge Number\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Contact\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Last Login\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:filteredEnforcers.map(enforcer=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:enforcer.full_name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:enforcer.email})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-900\",children:enforcer.badge_number||'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-900\",children:enforcer.phone_number||'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \".concat(enforcer.is_active?'bg-green-100 text-green-800':'bg-red-100 text-red-800'),children:enforcer.is_active?'Active':'Inactive'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\",children:enforcer.last_login?new Date(enforcer.last_login).toLocaleDateString():'Never'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-right text-sm font-medium\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingEnforcer(enforcer),className:\"text-indigo-600 hover:text-indigo-900 p-1 rounded-md hover:bg-indigo-50 transition-colors\",title:\"Edit Enforcer\",children:/*#__PURE__*/_jsx(Edit,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(enforcer.id),className:\"text-red-600 hover:text-red-900 p-1 rounded-md hover:bg-red-50 transition-colors\",title:\"Delete Enforcer\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]})})]},enforcer.id))})]})}),filteredEnforcers.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No enforcers found\"})})]}),(showAddModal||editingEnforcer)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed bg-transparent z-[9999] inset-0\",onClick:()=>{setShowAddModal(false);setEditingEnforcer(null);setFormErrors({});}}),/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 flex items-start justify-center z-[10000] p-4 pt-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mobile-modal bg-white rounded-lg shadow-2xl border border-gray-200 p-3 sm:p-4 w-full max-w-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"responsive-text-xl font-bold text-gray-900\",children:editingEnforcer?'Edit Enforcer':'Add New Enforcer'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowAddModal(false);setEditingEnforcer(null);setFormErrors({});},className:\"text-gray-400 hover:text-gray-600 transition-colors p-1 touch-target\",title:\"Close\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-2\",children:[formErrors.general&&!Object.keys(formErrors).some(key=>key!=='general')&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:formErrors.general})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block responsive-text-sm font-medium text-gray-700 mb-1\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",defaultValue:(editingEnforcer===null||editingEnforcer===void 0?void 0:editingEnforcer.username)||'',required:true,className:\"mobile-input \".concat(formErrors.username?'border-red-300 bg-red-50':'border-gray-300 hover:border-gray-400')}),formErrors.username&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 responsive-text-sm text-red-600\",children:formErrors.username})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block responsive-text-sm font-medium text-gray-700 mb-1\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",defaultValue:(editingEnforcer===null||editingEnforcer===void 0?void 0:editingEnforcer.email)||'',required:true,placeholder:\"enforcer@example.com\",className:\"mobile-input \".concat(formErrors.email?'border-red-300 bg-red-50':'border-gray-300 hover:border-gray-400')}),formErrors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 responsive-text-sm text-red-600\",children:formErrors.email})]}),!editingEnforcer&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block responsive-text-sm font-medium text-gray-700 mb-1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",required:true,placeholder:\"Enter a secure password\",className:\"mobile-input \".concat(formErrors.password?'border-red-300 bg-red-50':'border-gray-300 hover:border-gray-400')}),formErrors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 responsive-text-sm text-red-600\",children:formErrors.password})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block responsive-text-sm font-medium text-gray-700 mb-1\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"full_name\",defaultValue:(editingEnforcer===null||editingEnforcer===void 0?void 0:editingEnforcer.full_name)||'',required:true,className:\"mobile-input \".concat(formErrors.full_name?'border-red-300 bg-red-50':'border-gray-300 hover:border-gray-400')}),formErrors.full_name&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 responsive-text-sm text-red-600\",children:formErrors.full_name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block responsive-text-sm font-medium text-gray-700 mb-1\",children:[\"Badge Number\",!editingEnforcer&&suggestedBadgeNumber&&/*#__PURE__*/_jsxs(\"span\",{className:\"responsive-text-xs text-green-600 ml-2 font-medium\",children:[\"(Suggested: \",suggestedBadgeNumber,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"badge_number\",defaultValue:(editingEnforcer===null||editingEnforcer===void 0?void 0:editingEnforcer.badge_number)||suggestedBadgeNumber||'',required:true,placeholder:!editingEnforcer?suggestedBadgeNumber||'BADGE001':'',className:\"flex-1 mobile-input \".concat(formErrors.badge_number?'border-red-300 bg-red-50':'border-gray-300 hover:border-gray-400')},editingEnforcer?\"edit-\".concat(editingEnforcer.id):\"add-\".concat(suggestedBadgeNumber)),!editingEnforcer&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:fetchNextBadgeNumber,className:\"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-primary focus:border-transparent transition-colors touch-target\",title:\"Refresh suggested badge number\",children:/*#__PURE__*/_jsx(RefreshCw,{className:\"w-4 h-4 text-gray-600\"})})]}),formErrors.badge_number&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 responsive-text-sm text-red-600\",children:formErrors.badge_number})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block responsive-text-sm font-medium text-gray-700 mb-1\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone_number\",defaultValue:(editingEnforcer===null||editingEnforcer===void 0?void 0:editingEnforcer.phone_number)||'',pattern:\"[0-9+\\\\-\\\\s\\\\(\\\\)]+\",placeholder:\"Enter phone number\",className:\"mobile-input \".concat(formErrors.phone_number?'border-red-300 bg-red-50':'border-gray-300 hover:border-gray-400')}),formErrors.phone_number&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 responsive-text-sm text-red-600\",children:formErrors.phone_number})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block responsive-text-sm font-medium text-gray-700 mb-1\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"is_active\",defaultValue:editingEnforcer?editingEnforcer.is_active.toString():'true',className:\"mobile-select \".concat(formErrors.is_active?'border-red-300 bg-red-50':'border-gray-300 hover:border-gray-400'),children:[/*#__PURE__*/_jsx(\"option\",{value:\"true\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"false\",children:\"Inactive\"})]}),formErrors.is_active&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 responsive-text-sm text-red-600\",children:formErrors.is_active})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mobile-button-group pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:addEnforcerMutation.isPending||updateEnforcerMutation.isPending,className:\"mobile-btn-primary\",children:addEnforcerMutation.isPending||updateEnforcerMutation.isPending?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}),\"Saving...\"]}):editingEnforcer?'Update Enforcer':'Add Enforcer'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowAddModal(false);setEditingEnforcer(null);setFormErrors({});},className:\"mobile-btn-secondary\",children:\"Cancel\"})]})]})]})})]})]});};export default Enforcers;","map":{"version":3,"names":["React","useState","useEffect","useQuery","useMutation","useQueryClient","Plus","Edit","Trash2","Search","RefreshCw","adminAPI","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Enforcers","_enforcersResponse$da","_enforcersResponse$da2","_enforcersResponse$da3","_enforcersResponse$da4","searchTerm","setSearchTerm","statusFilter","setStatusFilter","showAddModal","setShowAddModal","editingEnforcer","setEditingEnforcer","formErrors","setFormErrors","suggestedBadgeNumber","setSuggestedBadgeNumber","queryClient","token","localStorage","getItem","console","log","data","enforcersResponse","isLoading","error","queryError","isFetching","queryKey","queryFn","getEnforcers","retry","refetchOnWindowFocus","hasData","enforcers","success","fetchNextBadgeNumber","response","getNextBadgeNumber","next_badge_number","addEnforcerMutation","mutationFn","enforcerData","createEnforcer","onSuccess","variables","setQueryData","oldData","_oldData$data","_oldData$data$data","_response$data","_objectSpread","invalidateQueries","enforcerName","full_name","username","concat","email","duration","style","minWidth","onError","_error$response","_error$response2","_error$response2$data","details","length","errors","forEach","detail","fieldName","param","path","location","msg","_error$response3","_error$response3$data","_error$response4","_error$response4$data","_error$response5","_error$response5$data","_error$response6","_error$response6$data","general","message","updateEnforcerMutation","_ref","id","updateEnforcer","_oldData$data2","_oldData$data2$data","map","enforcer","_response$data2","_error$response7","_error$response8","_error$response8$data","_error$response9","_error$response9$data","_error$response0","_error$response0$data","_error$response1","_error$response1$data","_error$response10","_error$response10$dat","deleteEnforcerMutation","deleteEnforcer","_error$response11","_error$response11$dat","filteredEnforcers","filter","_enforcer$badge_numbe","matchesSearch","toLowerCase","includes","badge_number","matchesStatus","is_active","handleSubmit","e","preventDefault","formData","FormData","target","get","phone_number","password","mutate","handleDelete","window","confirm","className","children","onClick","reload","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","type","placeholder","value","onChange","last_login","Date","toLocaleDateString","title","onSubmit","Object","keys","some","key","name","defaultValue","required","pattern","toString","disabled","isPending"],"sources":["C:/Users/Marcelo/OneDrive/Documents/Desktop/e-traffic system/client/src/pages/admin/Enforcers.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Plus, Edit, Trash2, Search, RefreshCw } from 'lucide-react';\nimport { adminAPI } from '../../services/api';\nimport toast from 'react-hot-toast';\n\nconst Enforcers = () => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [statusFilter, setStatusFilter] = useState('all');\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [editingEnforcer, setEditingEnforcer] = useState(null);\n  const [formErrors, setFormErrors] = useState({});\n  const [suggestedBadgeNumber, setSuggestedBadgeNumber] = useState('');\n  const queryClient = useQueryClient();\n  \n  // Debug authentication\n  const token = localStorage.getItem('token');\n  console.log('Auth token:', token ? 'Present' : 'Missing');\n  console.log('Token value:', token);\n\n  // Fetch enforcers\n  const { data: enforcersResponse, isLoading, error: queryError, isFetching } = useQuery({\n    queryKey: ['enforcers'],\n    queryFn: () => adminAPI.getEnforcers(),\n    retry: 1,\n    refetchOnWindowFocus: false\n  });\n  \n  console.log('Query state:', { isLoading, isFetching, error: queryError, hasData: !!enforcersResponse });\n\n  // Extract enforcers array from response (server wraps payload in data)\n  const enforcers = enforcersResponse?.data?.data?.enforcers || [];\n  \n  // Debug logging\n  console.log('Enforcers API Response:', enforcersResponse);\n  console.log('Extracted enforcers:', enforcers);\n  console.log('Response structure:', {\n    success: enforcersResponse?.data?.success,\n    data: enforcersResponse?.data,\n    enforcers: enforcersResponse?.data?.enforcers\n  });\n\n  // Fetch next badge number for new enforcers\n  const fetchNextBadgeNumber = async () => {\n    try {\n      const response = await adminAPI.getNextBadgeNumber();\n      if (response.data.success) {\n        setSuggestedBadgeNumber(response.data.data.next_badge_number);\n      }\n    } catch (error) {\n      console.error('Failed to fetch next badge number:', error);\n      // Fallback to manual entry\n      setSuggestedBadgeNumber('');\n    }\n  };\n\n  // Auto-fetch badge number when opening add modal\n  useEffect(() => {\n    if (showAddModal && !editingEnforcer) {\n      fetchNextBadgeNumber();\n    }\n  }, [showAddModal, editingEnforcer]);\n  \n\n\n  // Add enforcer mutation\n  const addEnforcerMutation = useMutation({\n    mutationFn: (enforcerData) => adminAPI.createEnforcer(enforcerData),\n    onSuccess: (response, variables) => {\n      // Add the new enforcer to the cache immediately\n      queryClient.setQueryData(['enforcers'], (oldData) => {\n        if (oldData?.data?.data?.enforcers) {\n          return {\n            ...oldData,\n            data: {\n              ...oldData.data,\n              data: {\n                ...oldData.data.data,\n                enforcers: [response.data?.data, ...(oldData.data.data.enforcers || [])]\n              }\n            }\n          };\n        }\n        return oldData;\n      });\n      \n      // Also invalidate to ensure fresh data across pages\n      queryClient.invalidateQueries(['enforcers']);\n      queryClient.invalidateQueries(['adminDashboard']);\n      setShowAddModal(false);\n      setFormErrors({});\n      \n      // Show success message with IoT device login instructions\n      const enforcerName = variables.full_name || variables.username;\n      toast.success(\n        `${enforcerName} added! \\n\\nðŸ“± IoT Login:\\nEmail: ${variables.email}\\nPassword: [as provided]`,\n        {\n          duration: 6000,\n          style: {\n            minWidth: '300px'\n          }\n        }\n      );\n    },\n    onError: (error) => {\n      console.log('Add enforcer error:', error.response?.data);\n      // Handle validation errors\n      if (error.response?.data?.details && error.response.data.details.length > 0) {\n        const errors = {};\n        error.response.data.details.forEach(detail => {\n          const fieldName = detail.param || detail.path || detail.location;\n          errors[fieldName] = detail.msg;\n        });\n        setFormErrors(errors);\n        // Don't show general error if we have specific field errors\n      } else {\n        // Only show general error if no specific field errors\n        setFormErrors({ \n          general: error.response?.data?.message || error.response?.data?.error || 'Failed to add enforcer. Please check your input and try again.' \n        });\n        toast.error(error.response?.data?.message || error.response?.data?.error || 'Failed to add enforcer');\n      }\n    }\n  });\n\n  // Update enforcer mutation\n  const updateEnforcerMutation = useMutation({\n    mutationFn: ({ id, data }) => adminAPI.updateEnforcer(id, data),\n    onSuccess: (response, variables) => {\n      // Update the enforcer in the cache immediately\n      queryClient.setQueryData(['enforcers'], (oldData) => {\n        if (oldData?.data?.data?.enforcers) {\n          return {\n            ...oldData,\n            data: {\n              ...oldData.data,\n              data: {\n                ...oldData.data.data,\n                enforcers: oldData.data.data.enforcers.map(enforcer =>\n                  enforcer.id === variables.id ? { ...enforcer, ...response.data?.data } : enforcer\n                )\n              }\n            }\n          };\n        }\n        return oldData;\n      });\n      \n      // Also invalidate to ensure fresh data across pages\n      queryClient.invalidateQueries(['enforcers']);\n      queryClient.invalidateQueries(['adminDashboard']);\n      setEditingEnforcer(null);\n      setFormErrors({});\n      toast.success('Enforcer updated successfully');\n    },\n    onError: (error) => {\n      console.log('Update enforcer error:', error.response?.data);\n      // Handle validation errors\n      if (error.response?.data?.details && error.response.data.details.length > 0) {\n        const errors = {};\n        error.response.data.details.forEach(detail => {\n          const fieldName = detail.param || detail.path || detail.location;\n          errors[fieldName] = detail.msg;\n        });\n        setFormErrors(errors);\n        // Don't show general error if we have specific field errors\n      } else {\n        // Only show general error if no specific field errors\n        setFormErrors({ \n          general: error.response?.data?.message || error.response?.data?.error || 'Failed to update enforcer. Please check your input and try again.' \n        });\n        toast.error(error.response?.data?.message || error.response?.data?.error || 'Failed to update enforcer');\n      }\n    }\n  });\n\n  // Delete enforcer mutation\n  const deleteEnforcerMutation = useMutation({\n    mutationFn: (id) => adminAPI.deleteEnforcer(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries(['enforcers']);\n      queryClient.invalidateQueries(['adminDashboard']);\n      toast.success('Enforcer deleted successfully');\n    },\n    onError: (error) => {\n      toast.error(error.response?.data?.message || 'Failed to delete enforcer');\n    }\n  });\n\n  // Filter enforcers\n  const filteredEnforcers = enforcers.filter(enforcer => {\n    const matchesSearch = enforcer.full_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         enforcer.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         enforcer.badge_number?.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesStatus = statusFilter === 'all' || \n                         (statusFilter === 'active' && enforcer.is_active) ||\n                         (statusFilter === 'inactive' && !enforcer.is_active);\n    \n    return matchesSearch && matchesStatus;\n  });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const formData = new FormData(e.target);\n    const enforcerData = {\n      username: formData.get('username'),\n      email: formData.get('email'),\n      full_name: formData.get('full_name'),\n      badge_number: formData.get('badge_number'),\n      phone_number: formData.get('phone_number'),\n      is_active: formData.get('is_active') === 'true'\n    };\n\n    // Only include password for new enforcers\n    if (!editingEnforcer) {\n      enforcerData.password = formData.get('password');\n    }\n\n    if (editingEnforcer) {\n      updateEnforcerMutation.mutate({ id: editingEnforcer.id, data: enforcerData });\n    } else {\n      addEnforcerMutation.mutate(enforcerData);\n    }\n  };\n\n  const handleDelete = (id) => {\n    if (window.confirm('Are you sure you want to delete this enforcer?')) {\n      deleteEnforcerMutation.mutate(id);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  if (queryError) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-red-600 mb-4\">Failed to load enforcers</p>\n        <p className=\"text-gray-600 text-sm\">{queryError.message}</p>\n        <button \n          onClick={() => window.location.reload()} \n          className=\"mt-4 btn-primary\"\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n        <div>\n          <h1 className=\"responsive-text-2xl font-bold text-gray-900\">Enforcer Management</h1>\n          <p className=\"responsive-text-sm text-gray-600\">Manage traffic enforcer accounts</p>\n        </div>\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => setShowAddModal(true)}\n            className=\"mobile-btn-primary flex items-center gap-2\"\n          >\n            <Plus className=\"w-4 h-4\" />\n            <span className=\"hidden sm:inline\">Add Enforcer</span>\n            <span className=\"sm:hidden\">Add</span>\n          </button>\n        </div>\n      </div>\n\n      {/* IoT Device Integration Info */}\n      <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4\">\n        <div className=\"flex items-start\">\n          <div className=\"flex-shrink-0\">\n            <svg className=\"h-5 w-5 text-blue-400 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z\" />\n            </svg>\n          </div>\n          <div className=\"ml-3 flex-1\">\n            <h3 className=\"text-sm font-medium text-blue-800\">\n              ðŸ“± IoT Device Integration\n            </h3>\n            <div className=\"mt-2 text-sm text-blue-700\">\n              <p>\n                Enforcers use <strong>email</strong> and <strong>password</strong> to log into handheld IoT devices for recording violations.\n              </p>\n              <div className=\"mt-2 flex flex-wrap gap-4 text-xs\">\n                <span className=\"flex items-center\">\n                  <span className=\"w-2 h-2 bg-green-500 rounded-full mr-1\"></span>\n                  Automatic account activation\n                </span>\n                <span className=\"flex items-center\">\n                  <span className=\"w-2 h-2 bg-green-500 rounded-full mr-1\"></span>\n                  Secure password hashing\n                </span>\n                <span className=\"flex items-center\">\n                  <span className=\"w-2 h-2 bg-green-500 rounded-full mr-1\"></span>\n                  Real-time violation sync\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white rounded-lg shadow mobile-card\">\n        <div className=\"flex flex-col sm:flex-row gap-4 p-4 sm:p-6\">\n          <div className=\"flex-1\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n              <input\n                type=\"text\"\n                placeholder=\"Search enforcers...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm sm:text-base transition-colors duration-200\"\n              />\n            </div>\n          </div>\n          <div className=\"relative\">\n            <select\n              value={statusFilter}\n              onChange={(e) => setStatusFilter(e.target.value)}\n              className=\"block w-full px-3 py-3 border border-gray-300 rounded-lg shadow-sm bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm sm:text-base transition-colors duration-200 min-w-[140px] appearance-none\"\n            >\n              <option value=\"all\">All Status</option>\n              <option value=\"active\">Active</option>\n              <option value=\"inactive\">Inactive</option>\n            </select>\n            <div className=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\n              <svg className=\"w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n              </svg>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Enforcers Table */}\n      <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Enforcer\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Badge Number\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Contact\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Status\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Last Login\n                </th>\n                <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Actions\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {filteredEnforcers.map((enforcer) => (\n                <tr key={enforcer.id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-4 py-4 whitespace-nowrap\">\n                    <div>\n                      <div className=\"text-sm font-medium text-gray-900\">\n                        {enforcer.full_name}\n                      </div>\n                      <div className=\"text-sm text-gray-500\">\n                        {enforcer.email}\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {enforcer.badge_number || 'N/A'}\n                  </td>\n                  <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {enforcer.phone_number || 'N/A'}\n                  </td>\n                  <td className=\"px-4 py-4 whitespace-nowrap\">\n                    <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                      enforcer.is_active \n                        ? 'bg-green-100 text-green-800' \n                        : 'bg-red-100 text-red-800'\n                    }`}>\n                      {enforcer.is_active ? 'Active' : 'Inactive'}\n                    </span>\n                  </td>\n                  <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {enforcer.last_login \n                      ? new Date(enforcer.last_login).toLocaleDateString()\n                      : 'Never'\n                    }\n                  </td>\n                  <td className=\"px-4 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                    <div className=\"flex justify-end gap-2\">\n                      <button\n                        onClick={() => setEditingEnforcer(enforcer)}\n                        className=\"text-indigo-600 hover:text-indigo-900 p-1 rounded-md hover:bg-indigo-50 transition-colors\"\n                        title=\"Edit Enforcer\"\n                      >\n                        <Edit className=\"w-4 h-4\" />\n                      </button>\n                      <button\n                        onClick={() => handleDelete(enforcer.id)}\n                        className=\"text-red-600 hover:text-red-900 p-1 rounded-md hover:bg-red-50 transition-colors\"\n                        title=\"Delete Enforcer\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n        \n        {filteredEnforcers.length === 0 && (\n          <div className=\"text-center py-8\">\n            <p className=\"text-gray-500\">No enforcers found</p>\n          </div>\n        )}\n      </div>\n\n      {/* Add/Edit Modal */}\n      {(showAddModal || editingEnforcer) && (\n        <>\n          {/* Backdrop - Full screen coverage */}\n                <div\n        className=\"fixed bg-transparent z-[9999] inset-0\"\n        onClick={() => {\n          setShowAddModal(false);\n          setEditingEnforcer(null);\n          setFormErrors({});\n        }}\n      />\n          \n                    {/* Modal Content */}\n          <div className=\"fixed inset-0 flex items-start justify-center z-[10000] p-4 pt-12\">\n            <div className=\"mobile-modal bg-white rounded-lg shadow-2xl border border-gray-200 p-3 sm:p-4 w-full max-w-2xl\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <h2 className=\"responsive-text-xl font-bold text-gray-900\">\n                  {editingEnforcer ? 'Edit Enforcer' : 'Add New Enforcer'}\n                </h2>\n                <button\n                  onClick={() => {\n                    setShowAddModal(false);\n                    setEditingEnforcer(null);\n                    setFormErrors({});\n                  }}\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors p-1 touch-target\"\n                  title=\"Close\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n              \n              <form onSubmit={handleSubmit} className=\"space-y-2\">\n                {/* General Error Message - only show if no specific field errors */}\n                {formErrors.general && !Object.keys(formErrors).some(key => key !== 'general') && (\n                  <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n                    <p className=\"text-sm text-red-600\">{formErrors.general}</p>\n                  </div>\n                )}\n                \n                <div>\n                  <label className=\"block responsive-text-sm font-medium text-gray-700 mb-1\">\n                    Username\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"username\"\n                    defaultValue={editingEnforcer?.username || ''}\n                    required\n                    className={`mobile-input ${\n                      formErrors.username ? 'border-red-300 bg-red-50' : 'border-gray-300 hover:border-gray-400'\n                    }`}\n                  />\n                  {formErrors.username && (\n                    <p className=\"mt-1 responsive-text-sm text-red-600\">{formErrors.username}</p>\n                  )}\n                </div>\n                \n                <div>\n                  <label className=\"block responsive-text-sm font-medium text-gray-700 mb-1\">\n                    Email\n                  </label>\n                  <input\n                    type=\"email\"\n                    name=\"email\"\n                    defaultValue={editingEnforcer?.email || ''}\n                    required\n                    placeholder=\"enforcer@example.com\"\n                    className={`mobile-input ${\n                      formErrors.email ? 'border-red-300 bg-red-50' : 'border-gray-300 hover:border-gray-400'\n                    }`}\n                  />\n                  {formErrors.email && (\n                    <p className=\"mt-1 responsive-text-sm text-red-600\">{formErrors.email}</p>\n                  )}\n                </div>\n                \n                {!editingEnforcer && (\n                  <div>\n                    <label className=\"block responsive-text-sm font-medium text-gray-700 mb-1\">\n                      Password\n                    </label>\n                    <input\n                      type=\"password\"\n                      name=\"password\"\n                      required\n                      placeholder=\"Enter a secure password\"\n                      className={`mobile-input ${\n                        formErrors.password ? 'border-red-300 bg-red-50' : 'border-gray-300 hover:border-gray-400'\n                      }`}\n                    />\n                    {formErrors.password && (\n                      <p className=\"mt-1 responsive-text-sm text-red-600\">{formErrors.password}</p>\n                    )}\n                  </div>\n                )}\n                \n                <div>\n                  <label className=\"block responsive-text-sm font-medium text-gray-700 mb-1\">\n                    Full Name\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"full_name\"\n                    defaultValue={editingEnforcer?.full_name || ''}\n                    required\n                    className={`mobile-input ${\n                      formErrors.full_name ? 'border-red-300 bg-red-50' : 'border-gray-300 hover:border-gray-400'\n                    }`}\n                  />\n                  {formErrors.full_name && (\n                    <p className=\"mt-1 responsive-text-sm text-red-600\">{formErrors.full_name}</p>\n                  )}\n                </div>\n                \n                <div>\n                  <label className=\"block responsive-text-sm font-medium text-gray-700 mb-1\">\n                    Badge Number\n                    {!editingEnforcer && suggestedBadgeNumber && (\n                      <span className=\"responsive-text-xs text-green-600 ml-2 font-medium\">\n                        (Suggested: {suggestedBadgeNumber})\n                      </span>\n                    )}\n                  </label>\n                  <div className=\"flex gap-2\">\n                    <input\n                      type=\"text\"\n                      name=\"badge_number\"\n                      defaultValue={editingEnforcer?.badge_number || suggestedBadgeNumber || ''}\n                      key={editingEnforcer ? `edit-${editingEnforcer.id}` : `add-${suggestedBadgeNumber}`}\n                      required\n                      placeholder={!editingEnforcer ? (suggestedBadgeNumber || 'BADGE001') : ''}\n                      className={`flex-1 mobile-input ${\n                        formErrors.badge_number ? 'border-red-300 bg-red-50' : 'border-gray-300 hover:border-gray-400'\n                      }`}\n                    />\n                    {!editingEnforcer && (\n                      <button\n                        type=\"button\"\n                        onClick={fetchNextBadgeNumber}\n                        className=\"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-primary focus:border-transparent transition-colors touch-target\"\n                        title=\"Refresh suggested badge number\"\n                      >\n                        <RefreshCw className=\"w-4 h-4 text-gray-600\" />\n                      </button>\n                    )}\n                  </div>\n                  {formErrors.badge_number && (\n                    <p className=\"mt-1 responsive-text-sm text-red-600\">{formErrors.badge_number}</p>\n                  )}\n                </div>\n                \n                <div>\n                  <label className=\"block responsive-text-sm font-medium text-gray-700 mb-1\">\n                    Phone Number\n                  </label>\n                  <input\n                    type=\"tel\"\n                    name=\"phone_number\"\n                    defaultValue={editingEnforcer?.phone_number || ''}\n                    pattern=\"[0-9+\\-\\s\\(\\)]+\"\n                    placeholder=\"Enter phone number\"\n                    className={`mobile-input ${\n                      formErrors.phone_number ? 'border-red-300 bg-red-50' : 'border-gray-300 hover:border-gray-400'\n                    }`}\n                  />\n                  {formErrors.phone_number && (\n                    <p className=\"mt-1 responsive-text-sm text-red-600\">{formErrors.phone_number}</p>\n                  )}\n                </div>\n                \n                <div>\n                  <label className=\"block responsive-text-sm font-medium text-gray-700 mb-1\">\n                    Status\n                  </label>\n                  <select\n                    name=\"is_active\"\n                    defaultValue={editingEnforcer ? editingEnforcer.is_active.toString() : 'true'}\n                    className={`mobile-select ${\n                      formErrors.is_active ? 'border-red-300 bg-red-50' : 'border-gray-300 hover:border-gray-400'\n                    }`}\n                  >\n                    <option value=\"true\">Active</option>\n                    <option value=\"false\">Inactive</option>\n                  </select>\n                  {formErrors.is_active && (\n                    <p className=\"mt-1 responsive-text-sm text-red-600\">{formErrors.is_active}</p>\n                  )}\n                </div>\n                \n                <div className=\"mobile-button-group pt-4\">\n                  <button\n                    type=\"submit\"\n                    disabled={addEnforcerMutation.isPending || updateEnforcerMutation.isPending}\n                    className=\"mobile-btn-primary\"\n                  >\n                    {addEnforcerMutation.isPending || updateEnforcerMutation.isPending ? (\n                      <div className=\"flex items-center justify-center gap-2\">\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                        Saving...\n                      </div>\n                    ) : (\n                      editingEnforcer ? 'Update Enforcer' : 'Add Enforcer'\n                    )}\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setShowAddModal(false);\n                      setEditingEnforcer(null);\n                      setFormErrors({});\n                    }}\n                    className=\"mobile-btn-secondary\"\n                  >\n                    Cancel\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Enforcers;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}